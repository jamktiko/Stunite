<div class="page-container">
  <h1>Rekisteröityminen</h1>
  <form
    [formGroup]="registerForm"
    (ngSubmit)="onSubmit()"
    class="register-form"
  >
    <div class="form-field">
      <label for="firstName">Etunimi</label>
      <input type="text" id="firstName" formControlName="firstName" required />
    </div>

    <div class="form-field">
      <label for="lastName">Sukunimi</label>
      <input type="text" id="lastName" formControlName="lastName" required />
    </div>

    <div class="form-field">
      <label for="email">Sähköposti</label>
      <input type="email" id="email" formControlName="email" required />
    </div>

    <div class="form-field pass-input">
      <label for="password">Salasana</label>
      <input
        [type]="showPass ? 'text' : 'password'"
        id="password"
        formControlName="password"
        required
      />
      <span
        class="material-symbols-outlined eye"
        (mousedown)="togglePassVisibility(true)"
        (mouseup)="togglePassVisibility(false)"
        (mouseleave)="togglePassVisibility(false)"
        style="cursor: pointer"
      >
        visibility
      </span>
    </div>

    <div class="form-field pass-input">
      <label for="password2">Salasana uudelleen</label>
      <input
        [type]="showPass2 ? 'text' : 'password'"
        id="password2"
        formControlName="password2"
        required
      />
      <span
        class="material-symbols-outlined eye"
        (mousedown)="togglePass2Visibility(true)"
        (mouseup)="togglePass2Visibility(false)"
        (mouseleave)="togglePass2Visibility(false)"
        style="cursor: pointer"
      >
        visibility
      </span>
      <!-- Show error message if passwords do not match -->
    </div>
    <div
      *ngIf="registerForm.errors?.['passMismatch'] && registerForm.get('password')?.value && registerForm.get('password2')?.value"
      class="error-message"
    >
      Salasanat eivät täsmää.
    </div>

    <div class="form-field">
      <label for="phoneNumber">Puhelinnumero</label>
      <input
        type="text"
        id="phoneNumber"
        formControlName="phoneNumber"
        required
      />
    </div>

    <div class="form-buttons">
      <button type="submit" [disabled]="registerForm.invalid">
        Rekisteröidy
      </button>
      <button (click)="onCancel()">Peruuta</button>
    </div>

    <!-- Display success or error messages -->
    <div *ngIf="success" class="success-message">{{ success }}</div>
    <div *ngIf="error" class="error-message">{{ error }}</div>
  </form>
</div>
